<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/style1.css" />
    <link rel="icon" href="images/favicon.ico" type="image/ico" sizes="16x16">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    <title>Boingo Passpoint Secure Hotspot Access</title>

    <!-- comment script and meta for debug to be able to run without server -->
    <script src="js/ga.js" type="text/javascript">  </script>

    <!--script for loading the airports list from another html file-->
    <script src="js/jquery.js" type="text/javascript"> </script>
    <script type="text/javascript">
      $(document).ready(function initialize(){
        $('.success').hide();
        $('.error').hide();
        $('.notsupported').hide();
      });

      function logData(msg) {
        $.post('logClientEvent', {
          message: msg,
          username: 'testuser'
        });
      }

      function executeProvision() {
        console.log('In executeProvision');
        var provisionData = '<?xml version="1.0"?><CarrierProvisioning xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.microsoft.com/networking/CarrierControl/v1"><Global><CarrierId>{2c85b76b-f859-47c4-8122-721fe8b6c25f}</CarrierId><SubscriberId>1234567890</SubscriberId></Global><WLANProfiles><WLANProfile xmlns="http://www.microsoft.com/networking/CarrierControl/WLAN/v1"><name>Boingo Passpoint Secure</name><SSIDConfig><SSID><name>Boingo Passpoint Secure</name></SSID></SSIDConfig><Hotspot2><DomainName>boingo.com</DomainName><NAIRealm><name>boingo.com</name></NAIRealm></Hotspot2><MSM><security><authEncryption><authentication>WPA2</authentication><encryption>AES</encryption><useOneX>true</useOneX></authEncryption><OneX xmlns="http://www.microsoft.com/networking/OneX/v1"><authMode>user</authMode><EAPConfig><EapHostConfig xmlns="http://www.microsoft.com/provisioning/EapHostConfig"><EapMethod><Type xmlns="http://www.microsoft.com/provisioning/EapCommon">21</Type><VendorId xmlns="http://www.microsoft.com/provisioning/EapCommon">0</VendorId><VendorType xmlns="http://www.microsoft.com/provisioning/EapCommon">0</VendorType><AuthorId xmlns="http://www.microsoft.com/provisioning/EapCommon">311</AuthorId></EapMethod><Config xmlns="http://www.microsoft.com/provisioning/EapHostConfig"><EapTtls xmlns="http://www.microsoft.com/provisioning/EapTtlsConnectionPropertiesV1"><ServerValidation><ServerNames /><TrustedRootCAHash>6a 6a 55 18 99 81 87 a1 8b ef eb bc 4 47 71 39 b1 85 ed 2f 1e 8e 82 56 93 a8 e5 7c 66 91 8b f3</TrustedRootCAHash><DisablePrompt>false</DisablePrompt></ServerValidation><Phase2Authentication><PAPAuthentication /></Phase2Authentication><Phase1Identity><IdentityPrivacy>true</IdentityPrivacy><AnonymousIdentity>anonymous</AnonymousIdentity></Phase1Identity></EapTtls></Config></EapHostConfig></EAPConfig></OneX><EapHostUserCredentials xmlns="http://www.microsoft.com/provisioning/EapHostUserCredentials" xmlns:eapCommon="http://www.microsoft.com/provisioning/EapCommon" xmlns:baseEap="http://www.microsoft.com/provisioning/BaseEapMethodUserCredentials"><EapMethod><eapCommon:Type>21</eapCommon:Type><eapCommon:AuthorId>311</eapCommon:AuthorId></EapMethod><Credentials xmlns="http://www.microsoft.com/provisioning/EapHostUserCredentials"><EapTtls xmlns="http://www.microsoft.com/provisioning/EapTtlsUserPropertiesV1"><Username>birdsteptest</Username><Password>wifirules</Password></EapTtls></Credentials></EapHostUserCredentials></security></MSM></WLANProfile></WLANProfiles><Signature xmlns="http://www.w3.org/2000/09/xmldsig#"><SignedInfo><CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315" /><SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" /><Reference URI=""><Transforms><Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" /></Transforms><DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" /><DigestValue>U8Ga1WyzmEToX4oiJviRCJIsITg=</DigestValue></Reference></SignedInfo><SignatureValue>lyuNBfGdOjaMKt/lOs8AwHzcqC/cg5w/NmqkCsZ3FeUmkoiQpf4ALVWjdBZw7P4ifreZaY4iiKWoSgLZO3ajSy3j/FWWOoC2WxfzHdxjsAGrOk+cUB379sVygFOjG5djXT+fZnnPt+De8+MSVyf43Oh0I+Ij415BpY+ykQucba4AkaClyt8ptXjz+FQMue0ZxsVpM5G21uhBY3zsZWyMpIE9nTn6Mp7BwluLLFqr7pKDL2cwSl8xA+BL5rA0j15cjDafT68bwFssHZjjvKm7WyyLmHKxugKuYhMDOl71m6KuKAUIJcQmBJorfPjS6rWtScq2ojsEmuywtghZwnwM9Q==</SignatureValue><KeyInfo><X509Data xmlns="http://www.w3.org/2000/09/xmldsig#"><X509Certificate>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</X509Certificate></X509Data></KeyInfo></Signature></CarrierProvisioning>';
        $('.download').hide();

        // try the provision the profile using Microsoft API
        try {
          console.log(provisionData);
          var result = window.external.msProvisionNetworks(provisionData);
          console.log('Result of provision', result);

    		  if (result === 0){
    			 $('.success').show();
           $.post('logClientEvent', {
            message: 'Windows profile successfully installed.',
            username: 'testuser'
           });
    		  } else {
            $('.notsupported').show();
            $.post('logClientEvent', {
              message: 'Windows profile failed install. Error supported.',
              username: 'testuser',
              resultcode: result
            });
    		  }
        } catch(e) {
          console.log(e);
          if (e.message && e.message.toLowerCase().indexOf('wifidevicenotpresent') > -1) {
            $('.notsupported').show();
          } else {
            $('#errorDetails').html((e && e.message && e.message !== '' &&
             e.message !== 'undefined is not a function') ?
              e.message : 'Further details unavailable');
            $('.error').show();
          }
          $.post('logClientEvent', {
            message: 'Windows profile failed install. Exception encountered.',
            username: 'testuser',
            error: e && e.message ? e.message : e
          });
        }
      }//executeProvision
    </script>
  </head>

  <body>
    <header>
      <div class="container">
        <span class="logo block"/>
      </div>
    </header>
    <section class="download">
      <h1>Install your profile</h1> <br><br>
      <p>Click the button below to load your passpoint profile.</p>
      <a href='javascript:' onclick="executeProvision();" class="redButton block"><span class="block">Download Profile</span></a>
    </section>
    <section class="error">
      <h1>An error occurred</h1> <br/>
      <p>We have encountered an unexpected error while trying to load your profile. The most common cause is if you are attempting to load this profile
      from an unsupported browser. Please insure you are running Internet Explorer 11 or above.</p>
      <br/>
      <p class="cyan">Error: <span id='errorDetails'></span></p>
    </section>
    <section class="notsupported">
      <h1>Device Not Supported</h1> <br/>
      <p>
        Unfortunately the device hardware you are using does not support Hotspot 2.0 technology.
        Please check back when you have a hotspot 2.0 capable device. To continue using your
        Boingo profile, download and install the Boingo app from the link below.
      </p>
      <a href="http://apps.microsoft.com/windows/en-us/app/boingo-wi-finder/2ea465ed-5f16-467a-a6dd-7dafa1e89358" onclick="logData('Windows 8 App Download Clicked')" class="redButton Block"><span class="block">Download App</span></a>
      <br/>
    </section>
    <section class="success">
      <h1>Success!  </h1>
      <p>You'll automatically be connected to the fastest speeds available in the following Passpoint Secure-enabled Boingo airports including 100,000+ Time Warner Cable Passpoint hotspots nationwide:</p>
      <h2 class="cyan">Passpoint Secure Boingo Hotspots</h2>
      <div id="airportListCont"/>
        <ul class="airportList">

          <li>
            <span> ORD </span>
            <span> Chicago O&#39;Hare International </span>
          </li>

          <li>
            <span> MDW </span>
            <span> Chicago Midway International  </span>
          </li>

          <li>
            <span> AUS </span>
            <span> Austin/Bergstorm International </span>
          </li>

          <li>
            <span> BNA </span>
            <span> Nashville International  </span>
          </li>

          <li>
            <span> MEM </span>
            <span> Memphis International </span>
          </li>

          <li>
            <span> MKE </span>
            <span> Milwaukee International </span>
          </li>

          <li>
            <span> SDF </span>
            <span> Louisville Regional </span>
          </li>

          <li>
            <span> SWF </span>
            <span> Stewart International </span>
          </li>

          <li>
            <span> OKC </span>
            <span> Oklahoma City International  </span>
          </li>

          <li>
            <span> JFK </span>
            <span> John F Kenndy International </span>
          </li>

          <li>
            <span> LGA </span>
            <span> La Guardia International </span>
          </li>

          <li>
            <span> EWR </span>
            <span> Newark Liberty International </span>
          </li>

          <li>
            <span> BIL </span>
            <span> Billings, Montana </span>
          </li>

          <li>
            <span> LAX </span>
            <span> Los Angeles International Airport </span>
          </li>

          <li>
            <span> BUF </span>
            <span> Buffalo Niagara International </span>
          </li>

          <li>
            <span> BUR </span>
            <span> Bob Hope Airport </span>
          </li>

          <li>
            <span> DTW </span>
            <span> Detroit Metropolitan </span>
          </li>

          <li>
            <span> BWI </span>
            <span> Baltimore Washington International </span>
          </li>

          <li>
            <span> MSP </span>
            <span> Minneapolis St. Paul International </span>
          </li>

          <li>
            <span> OAK </span>
            <span> Oakland International </span>
          </li>

          <li>
            <span> OMA </span>
            <span> Omaha </span>
          </li>

          <li>
            <span> PVD </span>
            <span> T.F. Green </span>
          </li>

          <li>
            <span> BOS </span>
            <span> Logan International Airport </span>
          </li>

          <li>
            <span> GRU </span>
            <span> Sao Paulo, Brazil  </span>
          </li>

          <li>
            <span> SNA </span>
            <span> Orange County </span>
          </li>

          <li>
            <span> PHX </span>
            <span> Phoenix International Airport </span>
          </li>

          <li>
            <span> DAL </span>
            <span> Dallas Love Field </span>
          </li>

        </ul>
      </div>
    </section>
  </body>
</html>
